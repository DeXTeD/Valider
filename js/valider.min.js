/*!
 * Valider - HTML5 Form Validation
 * @author DeXTeD
 * @version 1.0.0
 * @license MIT
 */
(function($){"use strict";var Valider=function(form,config){var self=this;return this.config=$.extend({onErrors:function(){},onInputError:function(){},onInputPass:function(){},lang:$("html").attr("lang")||"en"},config||{}),this.incorrectInputs={},this.form=form,this.inputs=form.find(":input:not(:button, :image, :reset, :submit, :disabled), textarea:not(:disabled)"),this.inputs.each(function(){var input=$(this);input.data("valider",{triggerError:function(key){self.callInputError(key,input)}})}),form.on("submit.valider",function(event){self.validate(self.inputs,event)}).attr("novalidate","novalidate"),this};Valider.prototype={regex:{number:/^-?[0-9]*(\.[0-9]+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i},errors:{en:{"*":"Incorrect value","[required]":"Field :name is required","[type=email]":"Invalid email address","[type=number]":"Value must be a number","[type=url]":"Invalid URL","[max]":"The maximum value is :max","[min]":"The minimum value is :min","[data-equals]":"The value is not the same as the field :equals"},pl:{"*":"Niepoprawna wartość","[required]":'Pole ":name" jest wymagane',"[type=email]":"Błędny adres e-mail","[type=number]":"Wartość musi być liczbą","[type=url]":"Niepoprawny adres WWW","[max]":"Maksymalna wartość to :max","[min]":"Minimala wartość to :min","[data-equals]":"Wartość nie jest taka sama jak pole :equals"}},filters:{"[required]":function(input,val){return input.is(":checkbox")?input.prop("checked"):input.is(":radio")?!0:!!val},"[type=email], [data-type=email]":function(input,val){return""===val||this.regex.email.test(val)},"[type=number], [data-type=number]":function(input,val){var valDot=val.replace(",",".");return valDot!==val&&input.val(valDot),""===val||this.regex.number.test(valDot)},"[type=url], [data-type=url]":function(input,val){return""===val||this.regex.url.test(val)},"[max], [data-type=max]":function(input,val){var max=input.attr("max")||input.data("max");return""===val||parseFloat(val)<=parseFloat(max)},"[min], [data-type=min]":function(input,val){var min=input.attr("min")||input.data("min");return""===val||parseFloat(val)>=parseFloat(min)},"[pattern]":function(input,val){return""===val||RegExp("^"+input.attr("pattern")+"$").test(val)},"[data-regex]":function(input,val){return""===val||this.regex[input.data("regex")].test(val)},"[data-equals]":function(input,val){var input2=this.inputs.filter("[name="+input.data("equals")+"]");return val===input2.val()}},getError:function(key,input,msg){var error=msg?msg:input.data("message"),attrs={name:input.data("name")||input.attr("name"),val:input.val(),min:input.attr("min")||input.data("min"),max:input.attr("max")||input.data("max"),equals:input.data("equalsName")||input.data("equals")};if(!error&&(key="[data-regex]"===key?"regex:"+input.data("regex"):key.split(",")[0],error=this.errors[this.config.lang][key],!error)){var type=input.data("type");type&&(error=this.errors[this.config.lang]["[type="+type+"]"]),error||(error=this.errors[this.config.lang]["*"])}return $.each(attrs,function(key){error=error.replace(":"+key,attrs[key])}),error},callInputError:function(key,input,msg){var error=this.getError(key,input,msg);return this.config.onInputError.call(input,error,input),error},callInputPass:function(input){this.config.onInputPass.call(input,input)},validateInput:function(input){var self=this,status=!0;return $.each(this.filters,function(key,fn){return input.is(key)&&!fn.call(self,input,input.val())?(self.bindInput(input),status=self.callInputError(key,input),!1):void 0}),status},bindInput:function(input){var timer,self=this;this.unBindInput(input),input.on("keyup.valider-input change.valider-input click.valider-input",function(){clearTimeout(timer),timer=setTimeout(function(){var check=self.validateInput(input);check===!0?(delete self.incorrectInputs[input.attr("name")],self.unBindInput(input),self.callInputPass(input)):self.incorrectInputs[input.attr("name")]=check},200)})},unBindInput:function(input){input.off(".valider-input")},validate:function(inputs,event){var self=this,isError=!1;inputs.each(function(){var input=$(this),name=input.attr("name"),check=self.validateInput(input);check!==!0?(self.incorrectInputs[name]=check,isError=!0):self.incorrectInputs[name]&&(delete self.incorrectInputs[name],self.unBindInput(input),self.callInputPass(input))}),isError&&(this.config.onErrors.call(null,this.incorrectInputs,inputs),event.preventDefault())},invalidate:function(obj){var self=this,inputs=this.inputs;$.each(obj,function(key,value){self.callInputError(!1,inputs.filter("[name="+key+"]"),value)})}},$.Valider={addLang:function(lng){return $.extend(!0,Valider.prototype.errors,lng),this},addRegex:function(name,regex){if("object"==typeof name)$.extend(Valider.prototype.regex,name);else{var filterObj={};filterObj[name]=regex,$.extend(Valider.prototype.regex,filterObj)}return this},addFilter:function(filter,fn){if("object"==typeof filter)$.extend(Valider.prototype.filters,filter);else{var filterObj={};filterObj[filter]=fn,$.extend(Valider.prototype.filters,filterObj)}return this}},$.fn.Valider=function(conf){return this.each(function(){var form=$(this);form.is("form")&&form.data("valider",new Valider(form,conf))})}})(window.jQuery);