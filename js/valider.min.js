/*!
 * Valider - HTML5 Form Validation
 * @author Kacper Kozak
 * @version 1.2.2
 * @license MIT
 */
(function(b){var a=function(e,d){var c=this;this.config=b.extend({onErrors:function(f){},onInputError:function(g,f){},onInputPass:function(f){},lang:b("html").attr("lang")||"pl"},d||{});this.incorrectInputs={};this.form=e;this.inputs=e.find(":input:not(:button, :image, :reset, :submit, :disabled)");this.inputs.each(function(){var f=b(this);f.data("valider",{triggerError:function(g){c.callInputError(g,f)}})});e.on("submit.valider",function(f){c.validate(c.inputs,f)}).attr("novalidate","novalidate");this.inputs.on("change.valider, blur.valider",function(){var f=b(this);setTimeout(function(){c.validateInput(f)},350)});this.inputs.on("validate.valider",function(){var f=b(this);c.validateInput(f)});return this};a.prototype={regex:{number:/^-?[0-9]*(\.[0-9]+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i},errors:{en:{"*":"Incorrect value","[required]":"Field :name is required","[type=email]":"Invalid email address","[type=number]":"Value must be a number","[type=url]":"Invalid URL","[max]":"The maximum value is :max","[min]":"The minimum value is :min","[data-equals]":"The value is not the same as the field :equals","[data-limit]":"The maximum length is :limit characters"},pl:{"*":"Niepoprawna wartość","[required]":"Pole jest wymagane","[type=email]":"Błędny adres e-mail","[type=number]":"Wartość musi być liczbą","[type=url]":"Niepoprawny adres WWW","[max]":"Maksymalna wartość to :max","[min]":"Minimala wartość to :min","[data-equals]":"Wartość nie jest taka sama jak pole :equals","[data-limit]":"Maksymalna długość to :limit znaków"}},filters:{"[required]":function(c,e){var d;if(c.is(":checkbox")||c.is(":radio")){d=c.attr("name").match(/^[^\[]+/)[0];return !!this.form.find('input[type="'+c.attr("type")+'"][name^="'+d+'"]:checked').length}return !!e},"[type=email], [data-type=email]":function(c,d){return d===""||this.regex.email.test(d)},"[type=number], [data-type=number]":function(c,e){var d=e.replace(",",".");if(d!==e){c.val(d)}return e===""||this.regex.number.test(d)},"[type=url], [data-type=url]":function(c,d){return d===""||this.regex.url.test(d)},"[max], [data-type=max]":function(d,e){var c=d.attr("max")||d.data("max");return e===""||(parseFloat(e)<=parseFloat(c))},"[min], [data-type=min]":function(c,e){var d=c.attr("min")||c.data("min");return e===""||(parseFloat(e)>=parseFloat(d))},"[pattern]":function(c,d){return d===""||new RegExp("^"+c.attr("pattern")+"$").test(d)},"[data-regex]":function(c,d){return d===""||this.regex[c.data("regex")].test(d)},"[data-equals]":function(d,e){var c=this.inputs.filter("[name="+d.data("equals")+"]");return e===c.val()},"[data-limit]":function(c,d){return d===""||c.data("limit")>=d.length}},getError:function(f,c,h){var e=h?h:c.data("message"),d={name:c.data("name")||c.attr("name"),val:c.val(),min:c.attr("min")||c.data("min"),max:c.attr("max")||c.data("max"),equals:c.data("equalsName")||c.data("equals"),limit:c.data("limit")},g;if(!e){if(f==="[data-regex]"){f="regex:"+c.data("regex")}else{f=f.split(",")[0]}e=this.errors[this.config.lang][f];if(!e){g=c.data("type");if(g){e=this.errors[this.config.lang]["[type="+g+"]"]}if(!e){e=this.errors[this.config.lang]["*"]}}}b.each(d,function(i,j){e=e.replace(":"+i,j)});return e},callInputError:function(e,c,f){var d=this.getError(e,c,f);this.config.onInputError.call(c,d,c);return d},callInputPass:function(c){this.config.onInputPass.call(c,c)},validateInput:function(e){var d=this,c=true;b.each(this.filters,function(f,g){if(e.is(f)&&!g.call(d,e,e.val())){d.bindInput(e);c=d.callInputError(f,e);return false}});return c},bindInput:function(d){var c=this,e;this.unBindInput(d);d.on("keyup.valider-input change.valider-input click.valider-input",function(){clearTimeout(e);e=setTimeout(function(){var f=c.validateInput(d),g=d.attr("name");if(f===true){delete c.incorrectInputs[g];c.unBindInput(d);c.callInputPass(d)}else{c.incorrectInputs[g]=f}},20)})},unBindInput:function(c){c.off(".valider-input")},validate:function(c,f){var d=this,e=false;c.each(function(){var h=b(this),i=h.attr("name"),g=d.validateInput(h);if(g!==true){d.incorrectInputs[i]=g;e=true}else{if(d.incorrectInputs[i]){delete d.incorrectInputs[i];d.unBindInput(h);d.callInputPass(h)}}});if(e){this.config.onErrors.call(null,this.incorrectInputs,c);if(f){f.preventDefault()}}},invalidate:function(e){var d=this,f=b.extend({},e),c=this.inputs;if(this.lastInvalidateErrors){b.each(this.lastInvalidateErrors,function(g,h){d.callInputPass(c.filter("[name="+g+"]"))})}b.each(f,function(g,h){d.callInputError(false,c.filter("[name="+g+"]"),h)});this.lastInvalidateErrors=f}};b.Valider={addLang:function(c){b.extend(true,a.prototype.errors,c);return this},addRegex:function(c,d){var e;if(typeof c==="object"){b.extend(a.prototype.regex,c)}else{e={};e[c]=d;b.extend(a.prototype.regex,e)}return this},addFilter:function(d,c){var e;if(typeof d==="object"){b.extend(a.prototype.filters,d)}else{e={};e[d]=c;b.extend(a.prototype.filters,e)}return this}};b.fn.Valider=function(c){return this.each(function(){var d=b(this);if(d.is("form")){d.data("valider",new a(d,c))}})}})(window.jQuery);